%\usepackage{cmbright} % fichier + lisible sur ordi, - lisible sur papier
\usepackage[utf8]{inputenc} %gestion des accents par le compilateurs
\usepackage[T1]{fontenc}

%%% LES POLICES

%% Fonte Latin Modern
\usepackage{lmodern} % fontes tailles variables
    % substitution des petites capitales grasses manquantes
    \rmfamily
    \DeclareFontShape{T1}{lmr}{b}{sc}{<->ssub*cmr/bx/sc}{}
    \DeclareFontShape{T1}{lmr}{bx}{sc}{<->ssub*cmr/bx/sc}{}

%% Fonte Fourier + Utopia
% \usepackage{fourier}
%     \usepackage[scaled=0.875]{helvet} % completement empatemment
%     \usepackage{courier} % completement chasse fixe

%% Fonte MathDesign + Utopia
% \usepackage[utopia]{mathdesign}

%% Fonte KP
% \usepackage{kpfonts}

%% Fonte Computer Modern Bright
% \usepackage{cmbright}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage[french]{babel} % traduction des packages

\usepackage{microtype}

\usepackage{tabularx} % Permet d'utiliser l'environnement tabularx
\usepackage{graphicx} % gestion de figure, dessins
\usepackage[dvipsnames]{xcolor} % charge des couleurs

\usepackage{xspace}
\usepackage[%
    % paperwidth=270.0mm,%  A supprimer si plus besoin de todonotes
    headheight=14pt,%
    top    = 2.5cm,%
    bottom = 2.5cm,%
    inner  = 3.5cm,%
    outer  = 2.5cm,%
    a4paper]{geometry} % feuille a4 de taille 21.0 x 29.7

% suite de paquets mathematiques
\usepackage{amsfonts} % gestions des polices mathématques
\usepackage[leqno]{amsmath}
    \everymath{\displaystyle} % Tout en grand !

\usepackage{amsthm} % gestion des théoremes
%\usepackage{thmbox}

\usepackage[autostyle=true]{csquotes}

\usepackage[%
    language=english,%
    sorting=nyt,%
    backend=biber,%
    style=authoryear,%
    hyperref=true,%
    giveninits=true, % initialles pour prénoms
    isbn=true,%
    url=false,%
    doi=true,%
    backref=true,%
    backrefstyle=three% si cité en page 1,2,3, ecrire 1-3,
    ]{biblatex}

    \renewbibmacro{in:}{}
    \DeclareFieldFormat[book,report]{title}{\mkbibquote{#1\isdot}}
    \DefineBibliographyStrings{french}{%
    bibliography = {Références},
    }
    \bibliography{bib/from_zotero}

\usepackage[%
    linkcolor=blue!70!black,%
    colorlinks=true,%
    citecolor=purple,%
    bookmarksopen=true,%
    bookmarksnumbered=true,%
    bookmarksopenlevel=5,
    ]{hyperref} % gestion des liens hypertexts et reférences

\usepackage[section]{placeins} % Place un FloatBarrier à chaque nouvelle section, les figures s'y arreterons

\usepackage{epigraph} % Pour faire de jolie citations
    \newcommand{\citationChap}[2]{\epigraph{\og \textit{#1} \fg{}}{#2}}

% Jolie en tete de chapitre
\usepackage[Lenny]{fncychap}
    \makeatletter
        \ChNameVar{\huge} % On modifie la taille du môt ``Chapitre''
    \makeatother

\usepackage{caption} % Faire des caption en dehors de figure

\usepackage[francais]{minitoc}   % Mini table des matières, en français
    \setcounter{minitocdepth}{2} % Mini-toc détaillées (sections/sous-sections)



%\usepackage{multicol} % texte sur plusieurs colonnes
%\usepackage{wrapfig} % permet de gérer les flotants dans les multiples colonnes
\usepackage[%
    nomain,%
    sanitizesort=false,%
    style=super4col%
    ]{glossaries} %voir preambule_glossaire.tex

% Permet de tracer des figures et schémas
\usepackage{pgfplots}
    \pgfplotscreateplotcyclelist{my cycle}{%
        solid,          every mark/.append style={solid}, mark=*\\%
        solid,          every mark/.append style={solid}, mark=square*\\%
        dashed,         every mark/.append style={solid}, mark=triangle*\\%
        dashed,         every mark/.append style={solid}, mark=diamond*\\%
        densely dotted, every mark/.append style={solid},            mark=+\\%
        densely dotted, every mark/.append style={solid},            mark=x\\%
        dashdotted,     every mark/.append style={solid}, mark=*\\%
        dashdotted,     every mark/.append style={solid}, mark=square*\\%
        dotted,         every mark/.append style={solid},            mark=triangle*\\%
        dotted,         every mark/.append style={solid}, mark=diamond*\\%
        loosely dashed, every mark/.append style={solid}, mark=+*\\%
        loosely dashed, every mark/.append style={solid}, mark=x\\%
    }
    \pgfplotsset{%
        compat=newest,
        height=7cm,
        cycle list name=my cycle,
        every axis legend/.style={
            cells={anchor=west},
            draw=black,
        },
    }

    \usepackage{tikz}
    \usetikzlibrary{calc} % permet de réaliser des calculs dans tikz
    \usetikzlibrary{patterns} % permet de faire des patterns
    \usetikzlibrary{math} % permet de definir des variables
    \usetikzlibrary{arrows.meta} % permet de spécifier les tailles des pointes de fleches
    \tikzset{every picture/.style={execute at begin picture={
        \shorthandoff{:;!?};} % permet de prendre en compte la ponctuation française dans tikz
    }}

% % permet d'ajouter des notes en marges
% \setlength{\oddsidemargin}{25mm}
% \setlength{\evensidemargin}{25mm}
% \setlength{\textwidth}{170mm}
% \reversemarginpar
% \usepackage{todonotes}

\usepackage{fancyhdr}      % Entête et pieds de page. Doit être placé APRES geometry
    \pagestyle{fancy}    % Indique que le style de la page sera justement fancy
    \fancyfoot{} % bas de page, rien
    \fancyfoot[RO,LE]{\thepage} % tête de page, droite paire, gauche impaire, rien
    \fancyhead{}
    \fancyhead[RO]{{\nouppercase{\rightmark}}} % tête de page droite impaire, le titre de la section
    \fancyhead[LE]{{\nouppercase{\leftmark}}} %tête de âge gauche paire, le titre du chapitre

\usepackage{array}   % for \newcolumntype macro
\usepackage{multirow}
    \newcolumntype{L}{>{\(}l<{\)}} % math-mode version of column type
    \newcolumntype{C}{>{\(}c<{\)}}
    \newcolumntype{R}{>{\(}r<{\)}}

\usepackage{tcolorbox} % Pour faire de jolie boite, un peu visible
\usepackage{lettrine} % Pour faire de jolie lettre

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{pdflscape} % Pour pouvoir changer l'orientation des pages
    %%% Solution pour avoir un paysage qui pointe vers l'intérieur du livre
    \makeatletter
    \global\let\orig@begin@landscape=\landscape%
    \global\let\orig@end@landscape=\endlandscape%
    \gdef\@true{1}
    \gdef\@false{0}
    \gdef\landscape{%
        \global\let\within@landscape=\@true%
        \orig@begin@landscape%
    }%
    \gdef\endlandscape{%
        \orig@end@landscape%
        \global\let\within@landscape=\@false%
    }%
    \@ifpackageloaded{pdflscape}{%
        \gdef\pdf@landscape@rotate{\PLS@Rotate}%
    }{
        \gdef\pdf@landscape@rotate#1{}%
    }
    \let\latex@outputpage\@outputpage
    \def\@outputpage{
        \ifx\within@landscape\@true%
            \if@twoside%
                \ifodd\c@page%
                    \gdef\LS@rot{\setbox\@outputbox\vbox{%
                        \pdf@landscape@rotate{-90}%
                        \hbox{\rotatebox{90}{\hbox{\rotatebox{180}{\box\@outputbox}}}}}%
                    }%
                \else%
                    \gdef\LS@rot{\setbox\@outputbox\vbox{%
                        \pdf@landscape@rotate{+90}%
                        \hbox{\rotatebox{90}{\hbox{\rotatebox{0}{\box\@outputbox}}}}}%
                    }%
                \fi%
            \else%
                \gdef\LS@rot{\setbox\@outputbox\vbox{%
                    \pdf@landscape@rotate{+90}%
                    \hbox{\rotatebox{90}{\hbox{\rotatebox{0}{\box\@outputbox}}}}}%
                }%
            \fi%
        \fi%
        \latex@outputpage%
    }
    \makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Pas de numéro de page sur la première page des chapitres
\makeatletter
\let\ps@plain=\ps@empty
\makeatother

% Réglage fin des notes de bas de page
\FrenchFootnotes % pour les notes de bas de page à la française
\AddThinSpaceBeforeFootnotes % pour avoir une espace fine entre le mot et l'appel de note

% Pour que les pages paires sans texte (par exemple, à la fin d'un chapitre et
% avant un autre), ne contiennent ni en-tête ni pied de page (source :
% http://www.tex.ac.uk/cgi-bin/texfaq2html?label=reallyblank)
\let\origdoublepage\cleardoublepage
\newcommand{\clearemptydoublepage}{%
  \clearpage
  {\pagestyle{empty}\origdoublepage}%
}
\let\cleardoublepage\clearemptydoublepage

\setcounter{tocdepth}{1} % Sommaire n'inclus que les niveau 1 à 2 : section, sous-section

\setlength{\parindent}{0pt} % pas d'alinéa à chaque paragraphe